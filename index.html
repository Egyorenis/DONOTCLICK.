<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f4f4f4;
      }

      h1 {
        color: #333;
      }

      a {
        color: #555;
        display: block;
        margin: 10px 0 20px;
      }

      button {
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        background-color: #ff5555;
        color: white;
        border-radius: 5px;
        position: relative;
      }

      button:focus {
        outline: none;
      }

      video {
        display: none;
        margin-top: 20px;
        width: 80%;
        max-width: 600px;
      }
    </style>
    <script>
      let hoverCount = 0;

      function moveButton(event) {
        if (hoverCount < 2) {
          const button = event.target;
          const randomX = Math.random() * 200 - 100;
          const randomY = Math.random() * 200 - 100;

          button.style.transform = `translate(${randomX}px, ${randomY}px)`;
          hoverCount++;
        }
      }

      function playVideo() {
        const video = document.getElementById('playVideo');
        video.style.display = 'block';
        video.play();
        triggerFullscreen();
        preventTabClose();
      }

      function triggerFullscreen() {
        const elem = document.documentElement;

        if (elem.requestFullscreen) {
          elem.requestFullscreen();
        } else if (elem.mozRequestFullScreen) { /* Firefox */
          elem.mozRequestFullScreen();
        } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
          elem.webkitRequestFullscreen();
        } else if (elem.msRequestFullscreen) { /* IE/Edge */
          elem.msRequestFullscreen();
        }

        setTimeout(() => {
          if (!document.fullscreenElement) {
            triggerFullscreen();
          }
        }, 1);
      }

      function preventTabClose() {
        window.onbeforeunload = function () {
          localStorage.setItem("videoTime", document.getElementById('playVideo').currentTime);
          return "Are you sure you want to leave?";
        };

        const video = document.getElementById('playVideo');
        video.addEventListener('ended', () => {
          video.play();
        });
      }

      // Handle video state when the page is loaded
      window.onload = function () {
        const savedTime = localStorage.getItem("videoTime");
        if (savedTime) {
          const video = document.getElementById('playVideo');
          video.currentTime = savedTime;
        }

        // Detect when the tab is closed, duplicate the tab and remove the old one
        window.addEventListener('beforeunload', () => {
          if (!window.location.href.includes("newTab=true")) {
            const videoUrl = window.location.href + "?newTab=true";
            window.open(videoUrl, "_blank");
          }
        });

        if (window.location.href.includes("newTab=true")) {
          window.onbeforeunload = null; // Disable the beforeunload event for the duplicated tab
        }
      }

      document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement) {
          setTimeout(triggerFullscreen, 1);
        }
      });

      document.addEventListener('webkitfullscreenchange', () => {
        if (!document.fullscreenElement) {
          setTimeout(triggerFullscreen, 1);
        }
      });

      document.addEventListener('mozfullscreenchange', () => {
        if (!document.fullscreenElement) {
          setTimeout(triggerFullscreen, 1);
        }
      });

      document.addEventListener('MSFullscreenChange', () => {
        if (!document.fullscreenElement) {
          setTimeout(triggerFullscreen, 1);
        }
      });
    </script>
  </head>
  <body>
    <h1>Why.</h1>
    <a>I told you not to click the page just leave, and do NOT click that button.</a>
    <button onmouseover="moveButton(event)" onclick="playVideo()">DO NOT CLICK ME.</button>
    <video id="playVideo" controls>
      <source src="3763206.mov.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </body>
</html>
